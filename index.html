<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Elementix ‚Äî –∞–ª—Ö–∏–º–∏—è</title>
<meta name="color-scheme" content="dark">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><text y='52' font-size='52'>üß™</text></svg>">
<style>
:root{
  --bg:#0e1115; --panel:#141a22; --panel2:#0b1218; --line:#223042;
  --ink:#e6eaf0; --muted:#a5b4c2; --accent:#7aa2ff; --gold:#ffd166; --danger:#ffb4a2;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Noto Sans",sans-serif}
body{background:radial-gradient(900px 520px at 80% -10%, #1a2430, #0e1115),linear-gradient(#0e1115,#0e1115)}

.app{min-height:100%;display:flex;flex-direction:column}

/* Compact smart header */
.header{position:sticky;top:0;z-index:20;background:rgba(14,17,21,.8);backdrop-filter:blur(10px);border-bottom:1px solid #1e2734;transition:transform .25s ease}
.header.hidden{transform:translateY(-100%)}
.header .row{display:flex;align-items:center;gap:10px;padding:10px 12px}
.logo{width:26px;height:26px;display:grid;place-items:center;background:#243244;border:1px solid #2d3c52;border-radius:7px}
.h-title{font-weight:800}
.h-sub{font-size:11px;color:var(--muted)}
.header .spacer{flex:1}
.pill{display:flex;align-items:center;gap:6px;background:#152031;border:1px solid #26324a;color:var(--gold);border-radius:999px;padding:6px 10px;font-weight:800}

/* Layout */
.wrap{display:grid;grid-template-columns:1fr;gap:12px;padding:12px 12px 96px}
@media (min-width:1000px){.wrap{grid-template-columns:1.25fr .75fr}}

.panel{background:var(--panel);border:1px solid var(--line);border-radius:16px;box-shadow:0 6px 22px rgba(0,0,0,.25)}
.lab{display:grid;grid-template-rows:auto 1fr auto;gap:10px;padding:12px}
.toolbar{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.btn{background:#243244;border:1px solid #304059;color:#cfe1ff;border-radius:12px;padding:12px 14px;font-weight:700;cursor:pointer}
.btn.primary{background:var(--accent);border:none;color:#07101c;font-weight:900}
.btn.ghost{background:transparent;border:1px dashed #2a384b;color:#9bb7ff}
.btn:disabled{opacity:.55;cursor:not-allowed}

.bowls{display:grid;grid-template-columns:1fr 1fr;gap:12px;transition:transform .25s ease}
.bowls.focus{transform:scale(1.015)}
.bowl{position:relative;background:var(--panel2);border:1px dashed #2a384b;border-radius:16px;min-height:190px;display:grid;place-items:center;overflow:hidden}
.bowl .hint{position:absolute;top:8px;left:12px;color:var(--muted);font-size:12px}
.bowl .clear{position:absolute;top:8px;right:8px;background:#152031;border:1px solid #26324a;color:#cfe1ff;border-radius:9px;padding:5px 9px;font-size:11px;cursor:pointer}
.picked{display:flex;gap:8px;align-items:center}
.picked .emoji{font-size:32px}
.picked .name{font-size:13px}

/* Dex */
.dex{display:grid;grid-template-rows:auto auto 1fr;gap:10px;padding:12px}
.search{display:flex;gap:8px}
.search input{flex:1;background:#0b1218;border:1px solid var(--line);border-radius:10px;color:#cfe1ff;padding:11px}
.grid{display:grid;grid-template-columns:repeat(auto-fill, minmax(108px,1fr));gap:10px}
.card{background:linear-gradient(180deg,#101821,#0b1218);border:1px solid var(--line);border-radius:14px;padding:10px;display:grid;gap:6px;cursor:grab;user-select:none;position:relative;transition:transform .12s ease, box-shadow .2s ease}
.card:hover{transform:translateY(-2px);box-shadow:0 8px 16px rgba(0,0,0,.25)}
.card.locked{opacity:.45;filter:grayscale(.25);cursor:not-allowed}
.emoji{font-size:30px;filter:drop-shadow(0 6px 16px rgba(0,0,0,.35))}
.name{font-size:12px;color:#cfe1ff}
.tag{position:absolute;top:8px;right:8px;font-size:10px;background:#162033;border:1px solid #26324a;border-radius:999px;padding:2px 6px}
.tag.common{color:#a5b4c2}.tag.rare{color:#7aa2ff}.tag.epic{color:#e19cff}

/* Bottom Action Dock */
.dock{position:fixed;left:0;right:0;bottom:0;z-index:40;background:linear-gradient(180deg, rgba(14,17,21,.0), rgba(14,17,21,.8));padding:10px 10px calc(10px + env(safe-area-inset-bottom,0px));display:flex;justify-content:center}
.dock .inner{display:grid;grid-template-columns:1fr auto 1fr;gap:10px;align-items:center;max-width:780px;width:100%}
.dock .btn{border-radius:14px;padding:14px 14px}
.dock .primary{padding:16px 24px;border-radius:18px;font-size:16px}
.dock .hint{display:flex;gap:8px;align-items:center;justify-content:center;white-space:nowrap}
.dock .hint .sub{font-size:11px;color:var(--muted)}
.dock .hint .badge{background:#162033;border:1px solid #26324a;padding:2px 6px;border-radius:999px;font-size:11px}

/* Toast & modal */
.toast{position:fixed;left:50%;bottom:80px;transform:translateX(-50%);background:#0b1218;border:1px solid var(--line);color:#cfe1ff;padding:10px 14px;border-radius:12px;opacity:0;animation:pop .9s ease-out forwards;z-index:60}
@keyframes pop{0%{transform:translateX(-50%) translateY(8px);opacity:0}20%{opacity:1}100%{transform:translateX(-50%) translateY(0);opacity:1}}
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:70}
.modal .card{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(420px,92vw);background:#0b1218;border:1px solid var(--line);border-radius:16px;padding:16px}
.modal .title{font-weight:800;margin-bottom:8px}

/* Splash */
.splash{position:fixed;inset:0;display:grid;place-items:center;background:rgba(11,18,24,.96);z-index:100}
.spin{width:16px;height:16px;border:2px solid #304059;border-top-color:#7aa2ff;border-radius:50%;animation:rot .8s linear infinite}
@keyframes rot{to{transform:rotate(360deg)}}
</style>
</head>
<body>
<div class="splash" id="splash"><div class="btn" style="display:flex;gap:10px;align-items:center"><div class="spin"></div><b>Elementix</b><span style="color:var(--muted)">–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è‚Ä¶</span></div></div>

<div class="app" id="app" hidden>
  <div class="header" id="hdr">
    <div class="row">
      <div class="logo">üß™</div>
      <div>
        <div class="h-title">Elementix</div>
        <div class="h-sub">100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚Ä¢ –†–µ—Ü–µ–ø—Ç—ã ‚Ä¢ –ñ—É—Ä–Ω–∞–ª ‚Ä¢ –ü–æ–¥—Å–∫–∞–∑–∫–∏</div>
      </div>
      <div class="spacer"></div>
      <div class="pill">‚≠ê <span id="stars">0</span></div>
      <button id="openJournal" class="btn ghost">–ñ—É—Ä–Ω–∞–ª</button>
    </div>
  </div>

  <div class="wrap">
    <div class="panel lab" id="lab">
      <div class="toolbar" id="ach">
        <!-- —Å—é–¥–∞ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–Ω–µ–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è –ø–æ–∑–∂–µ -->
      </div>
      <div class="bowls" id="bowls">
        <div class="bowl" id="bA"><div class="hint">–ü–µ—Ä–µ—Ç–∞—â–∏ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏ –∫–∞—Ä—Ç–æ—á–∫—É</div><button class="clear" data-clear="A">–û—á–∏—Å—Ç–∏—Ç—å</button></div>
        <div class="bowl" id="bB"><div class="hint">–ü–µ—Ä–µ—Ç–∞—â–∏ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏ –∫–∞—Ä—Ç–æ—á–∫—É</div><button class="clear" data-clear="B">–û—á–∏—Å—Ç–∏—Ç—å</button></div>
      </div>
      <div class="h-sub" style="text-align:center">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ ‚Ä¢ Stars ‚Äî –∏–º–∏—Ç–∞—Ü–∏—è</div>
    </div>

    <div class="panel dex">
      <div class="search">
        <input id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏‚Ä¶">
        <button id="reset" class="btn">–°–±—Ä–æ—Å</button>
      </div>
      <div style="font-size:12px;color:var(--muted)">–û—Ç–∫—Ä—ã—Ç–æ: <span id="openCount">0</span> / <span id="totalCount">0</span></div>
      <div class="grid" id="grid"></div>
    </div>
  </div>

  <!-- Action Dock -->
  <div class="dock">
    <div class="inner">
      <button id="hint" class="btn hint">
        <span id="hintLabel">–ü–æ–¥—Å–∫–∞–∑–∫–∞</span>
        <span id="hintBadge" class="badge">–±–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
      </button>
      <button id="mix" class="btn primary">–°–º–µ—à–∞—Ç—å</button>
      <button id="clear" class="btn">–û—á–∏—Å—Ç–∏—Ç—å —á–∞—à–∏</button>
    </div>
  </div>

  <!-- Simple modal for hint info / buy -->
  <div class="modal" id="modal">
    <div class="card">
      <div class="title" id="modalTitle">–ü–æ–¥—Å–∫–∞–∑–∫–∏</div>
      <div id="modalBody" style="color:var(--muted);margin-bottom:12px"></div>
      <div style="display:flex;gap:8px;justify-content:flex-end">
        <button id="mClose" class="btn">–ó–∞–∫—Ä—ã—Ç—å</button>
        <button id="mAction" class="btn primary">–û–∫</button>
      </div>
    </div>
  </div>
</div>

<script>
// ===== Data & state =====
const R = {C:'common', R:'rare', E:'epic'};
const SAVE_KEY = 'elementix-v9'; // global reset key
const PRICE = 10;

const BASE = [
  {id:'fire', n:'–û–≥–æ–Ω—å', e:'üî•', r:R.C},
  {id:'water', n:'–í–æ–¥–∞', e:'üíß', r:R.C},
  {id:'earth', n:'–ó–µ–º–ª—è', e:'ü™®', r:R.C},
  {id:'air', n:'–í–æ–∑–¥—É—Ö', e:'üí®', r:R.C},
];

const EXTRA = {
  steam:{n:'–ü–∞—Ä',e:'‚ô®Ô∏è',r:R.C}, mud:{n:'–ì—Ä—è–∑—å',e:'üü´',r:R.C}, cloud:{n:'–¢—É—á–∞',e:'‚òÅÔ∏è',r:R.C},
  energy:{n:'–≠–Ω–µ—Ä–≥–∏—è',e:'‚ö°Ô∏è',r:R.C}, lava:{n:'–õ–∞–≤–∞',e:'üåã',r:R.C}, dust:{n:'–ü—ã–ª—å',e:'üßπ',r:R.C},
  stone:{n:'–ö–∞–º–µ–Ω—å',e:'üóø',r:R.C}, sand:{n:'–ü–µ—Å–æ–∫',e:'üèñÔ∏è',r:R.C}, glass:{n:'–°—Ç–µ–∫–ª–æ',e:'ü™ü',r:R.C},
  life:{n:'–ñ–∏–∑–Ω—å',e:'üß¨',r:R.R}, plant:{n:'–†–∞—Å—Ç–µ–Ω–∏–µ',e:'üåø',r:R.C}, seed:{n:'–°–µ–º–µ–Ω–∞',e:'üå±',r:R.C}, flower:{n:'–¶–≤–µ—Ç–æ–∫',e:'üå∏',r:R.C}
};

const RECIPES = {
  'fire+water':'steam','earth+water':'mud','air+water':'cloud','fire+air':'energy','fire+earth':'lava','air+earth':'dust',
  'lava+water':'stone','stone+air':'sand','sand+fire':'glass','energy+mud':'life','plant+air':'seed','life+plant':'flower'
};

const ALL = (()=>{const m=new Map(); for(const b of BASE) m.set(b.id,b);
  for(const [id,meta] of Object.entries(EXTRA)) m.set(id,{id,n:meta.n,e:meta.e,r:meta.r}); return m;})();

let state = {disc:new Set(BASE.map(x=>x.id)), a:null,b:null, j:[], stars:0, daily:{date:dayKey(), used:false, paid:0}};

function dayKey(){ return new Date().toISOString().slice(0,10); }
function msToNextDay(){ const now=new Date(); const next=new Date(now.getFullYear(),now.getMonth(),now.getDate()+1,0,0,0,0); return next-now; }
function fmt(ms){ const s=Math.max(0,Math.floor(ms/1000)); const h=String(Math.floor(s/3600)).padStart(2,'0'); const m=String(Math.floor(s%3600/60)).padStart(2,'0'); const ss=String(s%60).padStart(2,'0'); return `${h}:${m}:${ss}`;}
function save(){ localStorage.setItem(SAVE_KEY, JSON.stringify({d:[...state.disc], a:state.a, b:state.b, j:state.j.slice(0,80), stars:state.stars, daily:state.daily})); }
function load(){ try{const raw=localStorage.getItem(SAVE_KEY); if(raw){const o=JSON.parse(raw); state.disc=new Set(o.d||BASE.map(x=>x.id)); state.a=o.a||null; state.b=o.b||null; state.j=Array.isArray(o.j)?o.j:[]; state.stars=Number.isFinite(o.stars)?o.stars:0; state.daily=o.daily||state.daily;}}catch{} if(state.daily.date!==dayKey()) state.daily={date:dayKey(), used:false, paid:0}; }

// ===== UI helpers =====
const $ = id=>document.getElementById(id);
const grid=$('grid'), openCount=$('openCount'), totalCount=$('totalCount'), bA=$('bA'), bB=$('bB'), starsEl=$('stars');
const mixBtn=$('mix'), clearBtn=$('clear'), hintBtn=$('hint'), hintLabel=$('hintLabel'), hintBadge=$('hintBadge');
const modal=$('modal'), mClose=$('mClose'), mAction=$('mAction'), modalTitle=$('modalTitle'), modalBody=$('modalBody');
const hdr=$('hdr'), bowls=$('bowls');

function tag(r){return r===R.E?'epic':r===R.R?'rare':'common'}
function cardHTML(id, opened){ const it=ALL.get(id); const t=`<div class="tag ${tag(it.r)}">${it.r===R.E?'–≠–ø–∏—á–µ—Å–∫–∏–π':it.r===R.R?'–†–µ–¥–∫–∏–π':'–û–±—ã—á–Ω—ã–π'}</div>`; return `<div class="card ${opened?'':'locked'}" data-id="${id}" draggable="${opened}">${t}<div class="emoji">${opened?it.e:'‚ùì'}</div><div class="name">${opened?it.n:'???'}</div></div>`; }
function renderDex(q=''){ q=q.toLowerCase(); grid.innerHTML=''; for(const it of [...ALL.values()].filter(i=>i.n.toLowerCase().includes(q))){ const opened=state.disc.has(it.id); const div=document.createElement('div'); div.innerHTML=cardHTML(it.id, opened); const card=div.firstChild; if(opened){ card.addEventListener('click', ()=>selectByClick(it.id)); card.addEventListener('dragstart', e=>{ e.dataTransfer.setData('text/plain', it.id); }); } grid.appendChild(card);} openCount.textContent=state.disc.size; totalCount.textContent=ALL.size; }
function bowlBlock(id){ if(!id) return '<div class="hint">–ü–µ—Ä–µ—Ç–∞—â–∏ –∏–ª–∏ –∫–ª–∏–∫–Ω–∏ –∫–∞—Ä—Ç–æ—á–∫—É</div>'; const it=ALL.get(id); return `<div class="picked"><div class="emoji">${it.e}</div><div class="name">${it.n}</div></div>`; }
function renderBowls(){ bA.innerHTML=bowlBlock(state.a); bB.innerHTML=bowlBlock(state.b); }
function toast(msg){ const t=document.createElement('div'); t.className='toast'; t.textContent=msg; document.body.appendChild(t); setTimeout(()=>t.remove(),1200); }

// Drag & drop
[bA,bB].forEach((b,ix)=>{ b.addEventListener('dragover', e=>e.preventDefault()); b.addEventListener('drop', e=>{ e.preventDefault(); const id=e.dataTransfer.getData('text/plain'); if(ix===0) state.a=id; else state.b=id; renderBowls(); save(); }); });
document.addEventListener('click', e=>{ const x=e.target.closest('[data-clear="A"]'); const y=e.target.closest('[data-clear="B"]'); if(x){ state.a=null; renderBowls(); save(); } if(y){ state.b=null; renderBowls(); save(); } });

function selectByClick(id){ if(!state.a) state.a=id; else if(!state.b) state.b=id; else { state.a=id; state.b=null; } renderBowls(); save(); }
$('search').addEventListener('input', (()=>{ let t; return ()=>{ clearTimeout(t); t=setTimeout(()=>renderDex($('search').value),120);} })());
$('reset').addEventListener('click', ()=>{ localStorage.removeItem(SAVE_KEY); location.reload(); });

// Mix & Clear
mixBtn.addEventListener('click', ()=>{ if(!state.a||!state.b){ toast('–ù—É–∂–Ω–æ 2 —ç–ª–µ–º–µ–Ω—Ç–∞'); return;} const out=RECIPES[[state.a,state.b].sort().join('+')]; if(!out){ toast('–ü—É—Å—Ç–∞—è —Ä–µ–∞–∫—Ü–∏—è‚Ä¶'); return;} const wasNew=!state.disc.has(out); state.disc.add(out); state.a=null; state.b=null; renderBowls(); renderDex($('search').value); save(); const it=ALL.get(out); toast((wasNew?'–ù–æ–≤—ã–π: ':'')+it.e+' '+it.n); if(wasNew){ state.j.unshift({id:out,t:Date.now()}); state.j=state.j.slice(0,80); save(); } });
clearBtn.addEventListener('click', ()=>{ state.a=null; state.b=null; renderBowls(); save(); });

// Smart header hide/show on scroll
let lastY=0; window.addEventListener('scroll',()=>{ const y=window.scrollY; hdr.classList.toggle('hidden', y>lastY && y>30); lastY=y; }, {passive:true});

// Bowls focus effect
const io=new IntersectionObserver(([e])=>{ bowls.classList.toggle('focus', e.isIntersecting); }, {threshold:.35});
io.observe(bowls);

// Hint logic with countdown
function reflectHint(){ starsEl.textContent=state.stars; if(!state.daily.used){ hintLabel.textContent='–ü–æ–¥—Å–∫–∞–∑–∫–∞'; hintBadge.textContent='–±–µ—Å–ø–ª–∞—Ç–Ω–æ'; hintBadge.style.color=''; }
else if(state.daily.paid>0){ hintLabel.textContent='–ï—â—ë –ø–æ–¥—Å–∫–∞–∑–∫–∞'; hintBadge.textContent='‚≠ê '+state.daily.paid; hintBadge.style.color='var(--gold)'; }
else{ hintLabel.textContent='–ö—É–ø–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É'; hintBadge.textContent='‚≠ê '+PRICE; hintBadge.style.color='var(--gold)'; } }
function findHint(){ for(const [pair,out] of Object.entries(RECIPES)){ const [x,y]=pair.split('+'); if(state.disc.has(x)&&state.disc.has(y)&&!state.disc.has(out)) return `${ALL.get(x).n} + ${ALL.get(y).n}`; } return null; }
function useHint(paid){ const s=findHint(); if(!s){ toast('–ü–æ—Ö–æ–∂–µ, –≤—Å—ë –æ—Ç–∫—Ä—ã—Ç–æ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ.'); return;} if(paid){ if(state.daily.paid<=0){ toast('–ù–µ—Ç –æ–ø–ª–∞—á–µ–Ω–Ω—ã—Ö –ø–æ–¥—Å–∫–∞–∑–æ–∫'); return; } state.daily.paid--; } else { if(state.daily.used){ toast('–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞'); return; } state.daily.used=true; } save(); toast('–ü–æ–ø—Ä–æ–±—É–π: '+s); reflectHint(); }
function showTimeLeft(){ const ms=msToNextDay(); openModal('–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞','–°–ª–µ–¥—É—é—â–∞—è –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è —á–µ—Ä–µ–∑: <b>'+fmt(ms)+'</b>'); }

hintBtn.addEventListener('click', ()=>{
  if(!state.daily.used) useHint(false);
  else if(state.daily.paid>0) useHint(true);
  else openModal('–ö—É–ø–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É', `–¶–µ–Ω–∞: <b>‚≠ê ${PRICE}</b><br>–í–∞—à –±–∞–ª–∞–Ω—Å: <b>‚≠ê ${state.stars}</b><br><br><small>–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –ø–æ—è–≤–∏—Ç—Å—è —á–µ—Ä–µ–∑ ${fmt(msToNextDay())}. <a href="#" id="seeTime">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–π–º–µ—Ä</a></small>`, '–ö—É–ø–∏—Ç—å', ()=>{
    if(state.stars<PRICE){ openModal('–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –∑–≤—ë–∑–¥', '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤—ë–∑–¥ –¥–ª—è –ø–æ–∫—É–ø–∫–∏.', '–û–∫'); return; }
    state.stars-=PRICE; state.daily.paid++; save(); reflectHint(); closeModal();
    toast('–ö—É–ø–ª–µ–Ω–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∞ ‚≠ê');
  });
});

// Modal helpers
function openModal(title, body, actionLabel='–ó–∞–∫—Ä—ã—Ç—å', onAction=null){
  modalTitle.textContent=title;
  modalBody.innerHTML=body;
  mAction.textContent=actionLabel;
  mAction.style.display = onAction ? 'inline-block' : 'none';
  mAction.onclick = onAction || null;
  modal.style.display='block';
  // link for time
  const st = document.getElementById('seeTime');
  if(st) st.addEventListener('click', (e)=>{ e.preventDefault(); closeModal(); showTimeLeft(); });
}
function closeModal(){ modal.style.display='none'; }
mClose.addEventListener('click', closeModal);
modal.addEventListener('click', e=>{ if(e.target===modal) closeModal(); });

// Keyboard
document.addEventListener('keydown', e=>{ if(e.key==='m'||e.key==='M') mixBtn.click(); if(e.key==='Escape'){ state.a=null; state.b=null; renderBowls(); save(); } });


  // Hard reset: remove old keys once
  try{
    ['elementix-v2','elementix-clean-v1','elementix-v3','elementix-v4','elementix-v5','elementix-v6','elementix-v7','elementix-v8']
      .forEach(k=>localStorage.removeItem(k));
  }catch{}

// init
(function init(){
  load(); renderDex(); renderBowls(); reflectHint();
  setTimeout(()=>{ try{document.getElementById('splash').remove()}catch{}; try{document.getElementById('app').hidden=false}catch{}; }, 300);
  // update hint badge countdown every second when used
  setInterval(()=>{ if(state.daily.used && state.daily.paid<=0){ hintBadge.textContent='—á–µ—Ä–µ–∑ '+fmt(msToNextDay()); }}, 1000);
})();
</script>
</body>
</html>
